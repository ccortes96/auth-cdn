var N=Object.defineProperty;var E=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var P=(t,e,o)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))S.call(e,o)&&P(t,o,e[o]);if(E)for(var o of E(e))H.call(e,o)&&P(t,o,e[o]);return t};import{R as l,P as A,r as i,i as B,F as L,a as T,b as U}from"./vendor.js";const I=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}};I();const y={icon:"",assetsUrl:"",auth0Domain:"",auth0Tenant:"",clientConfigurationBaseUrl:"",callbackOnLocationHash:!1,callbackURL:"",cdn:"",clientID:"",dict:{signin:{title:""}},extraParams:{protocol:"",audience:"",onRedirectCallback:"",scope:"",response_type:"",response_mode:"",nonce:"",code_challenge:"",code_challenge_method:"",auth0Client:"",_csrf:"",_intstate:"",state:""},internalOptions:{protocol:"",audience:"",onRedirectCallback:"",scope:"",response_type:"",response_mode:"",nonce:"",code_challenge:"",code_challenge_method:"",auth0Client:"",_csrf:"",_intstate:"",state:""},widgetUrl:"",isThirdPartyClient:!1,authorizationServer:{url:"",issuer:""},colors:{page_background:"",primary:""}},F=[{id:"merchant",databaseConnection:"Username-Password-Authentication"},{id:"hugo-fun-merchant",databaseConnection:"Username-Password-Authentication"}],O=t=>p({domain:t.auth0Domain,clientID:t.clientID,redirectUri:t.callbackURL,responseType:t.extraParams.response_type,scope:t.extraParams.scope,overrides:{__tenant:t.auth0Tenant,__token_issuer:t.extraParams.audience}},t.internalOptions),M=t=>{const e=F.find(o=>o.id===t);return(e==null?void 0:e.databaseConnection)?e.databaseConnection:"Username-Password-Authentication"},x=l.createContext(y),C=({children:t})=>{const[e,o]=i.exports.useState(y),[a,n]=i.exports.useState(null),[c,s]=i.exports.useState({code:null,description:null});i.exports.useEffect(()=>{o(r=>p(p({},r),auth0Application))},[document.readyState]),i.exports.useEffect(()=>{if(e.clientID){const r=O(auth0Application);n(new B.WebAuth(p({},r)))}},[e.clientID]);const d=r=>{switch(r.code){case"access_denied":case"invalid_user_password":s({code:r.code,description:"Correo o contrase\xF1a incorrecta."});break;case"invalid_signup":s({code:r.code,description:"Registro inv\xE1lido."});break;case"invalid_password":r.name==="PasswordStrengthError"&&s({code:r.code,description:"Asegurate de llenar los requisitos de contrase\xF1a."});break;case"empty_fields":s({code:r.code,description:"Correo y contrase\xF1a requeridos."});break;case"empty_email":s({code:r.code,description:"Correo requerido."});break;case"password_mismatch":s({code:r.code,description:"Las contrase\xF1as no coinciden."});break;default:s({code:"unexpected_error",description:"Ocurri\xF3 un error."})}},_=r=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(r),w=(r,u)=>r&&u?_(r)?!0:(d({code:"invalid_user_password"}),!1):(d({code:"empty_fields"}),!1),k=(r,u)=>{w(r,u)&&(s({code:null,description:null}),a.login({realm:M(e.dict.signin.title),username:r,password:u},(m,b)=>{m&&d(m),console.log("{err, authResult}",{err:m,authResult:b})}))},D=()=>{a.authorize({connection:"google-oauth2"},(r,u)=>{r&&d(r),console.log("{err, authResult}",{err:r,authResult:u})})};return l.createElement(x.Provider,{value:{state:e,login:k,loginWithGoogle:D,loginError:c}},t)};C.propTypes={children:A.elementType.isRequired};const f=({Component:t})=>l.createElement(i.exports.Suspense,{fallback:l.createElement(L,null)},t?l.createElement(t,null):null);f.propTypes={Component:A.elementType.isRequired};const q="modulepreload",v={},z="https://cdn.jsdelivr.net/gh/ccortes96/auth-cdn/",h=function(e,o){return!o||o.length===0?e():Promise.all(o.map(a=>{if(a=`${z}${a}`,a in v)return;v[a]=!0;const n=a.endsWith(".css"),c=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":q,n||(s.as="script",s.crossOrigin=""),s.href=a,document.head.appendChild(s),n)return new Promise((d,_)=>{s.addEventListener("load",d),s.addEventListener("error",_)})})).then(()=>e())},g=new Map,R=t=>{if(g.has(t))return g.get(t);let e=null;switch(t){case"hugo-fun-merchant":e=i.exports.lazy(()=>h(()=>import("./index2.js"),["assets/index2.js","assets/index3.css","assets/vendor.js","assets/vendor.css"]));break;case"merchant":e=i.exports.lazy(()=>h(()=>import("./index3.js"),["assets/index3.js","assets/index4.css","assets/vendor.js","assets/vendor.css"]));break;case"serverError":e=i.exports.lazy(()=>h(()=>import("./index4.js"),["assets/index4.js","assets/index.css","assets/vendor.js","assets/vendor.css"]));break;default:e=i.exports.lazy(()=>h(()=>import("./index5.js"),["assets/index5.js","assets/index2.css","assets/vendor.js","assets/vendor.css"]))}return g.set(t,e),e},$=()=>{const[t,e]=i.exports.useState(!1),o=i.exports.useContext(x);if(i.exports.useEffect(()=>{window.unhandledrejection||(window.unhandledrejection=n=>{console.error(`UNHANDLED PROMISE REJECTION: ${JSON.stringify(n.reason)}`,n),e(!0)})},[t]),t)return l.createElement(f,{Component:R("serverError")});const a=R(o.state.dict.signin.title);return l.createElement(f,{Component:a})},j=()=>l.createElement(C,null,l.createElement($,null));T({environment:"production",dsn:{H4B_CDN_URL_BASE:"https://cdn.jsdelivr.net/gh/ccortes96/auth-cdn",H4B_APP_FUN:"hugo-fun-merchant",H4B_APP_MERCHANT:"merchant"}.H4B_SENTRY_DSN});const V=document.getElementById("root");U.render(l.createElement(j,null),V);export{x as A};
